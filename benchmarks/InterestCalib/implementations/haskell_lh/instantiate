#!/bin/sh

set -e # Die on error.

impl_dir=$FINPAR_IMPLEMENTATION
input=$FINPAR_INPUT

cp $impl_dir/*hs .
cp $impl_dir/run .

$FINPAR_LIB_DIR/linearise_data.py $FINPAR_INPUT population_size convergence_iterations num_swaption_quotes swaption_quotes num_hermite_coefficients hermite_coefficients hermite_coefficient_weights sobol_num_bits sobol_dir_vs > input.data

ghc -Wall -O2 -msse2 -rtsopts SwapCalib.hs -o SwapCalib
